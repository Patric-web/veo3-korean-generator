<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Veo 3 í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸° - ì‚¬ìš©ëŸ‰ ì œí•œ ê¸°ëŠ¥ í¬í•¨</title>
    <meta name="description" content="í•œêµ­ì–´ ë™ì˜ìƒ ì•„ì´ë””ì–´ë¥¼ Google Veo 3ìš© ì˜ë¬¸ í”„ë¡¬í”„íŠ¸ë¡œ ìë™ ë³€í™˜í•´ì£¼ëŠ” ë¬´ë£Œ ë„êµ¬ì…ë‹ˆë‹¤.">
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // API í‚¤ì™€ í•˜ë£¨ ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜ ì„¤ì •
        // Replace "YOUR_API_KEY" with your actual Gemini API Key.
        // It's highly recommended to handle this securely on the server side in a production environment.
        const GEMINI_API_KEY = "AIzaSyB5PrL7ZFx9xag2hJSeN0m_I9HaRJp1C9Q";
        const MAX_DAILY_CALLS = 10; // Set the maximum number of daily uses.

        // Lucide Icons (Implemented as inline SVGs)
        const Camera = () => (<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z"/><circle cx="12" cy="13" r="3"/></svg>);
        const Wand2 = () => (<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M15 4V2m0 14v-2M8 9h2m14 0h-2M8.5 8.5l1.5-1.5M15.5 15.5l1.5-1.5M8.5 15.5l1.5 1.5M15.5 8.5l1.5 1.5"/><circle cx="12" cy="12" r="2"/></svg>);
        const Copy = () => (<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"/><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/></svg>);
        const Check = () => (<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2"><path d="M20 6L9 17l-5-5"/></svg>);

        // Functions to manage the call count using localStorage
        // This is a simple client-side solution. For a robust solution, a server-side counter is recommended.
        const getDailyCallCount = () => {
            const today = new Date().toISOString().slice(0, 10); // Format 'YYYY-MM-DD'
            const storedData = JSON.parse(localStorage.getItem('apiCallCount')) || {};
            // If the date has changed, reset the count
            if (storedData.date !== today) {
                storedData.date = today;
                storedData.count = 0;
            }
            return storedData;
        };

        const incrementDailyCallCount = (count) => {
            const today = new Date().toISOString().slice(0, 10);
            localStorage.setItem('apiCallCount', JSON.stringify({
                date: today,
                count: count + 1
            }));
        };

        function Veo3PromptGenerator() {
            const [koreanInput, setKoreanInput] = useState('');
            const [generatedPrompt, setGeneratedPrompt] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [copied, setCopied] = useState(false);
            const [error, setError] = useState('');
            const [callCount, setCallCount] = useState(0);

            // Update the call count state on initial load
            useEffect(() => {
                setCallCount(getDailyCallCount().count);
            }, []);

            const generatePrompt = async () => {
                // Input validation
                if (!koreanInput.trim()) {
                    setError('ë™ì˜ìƒ ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                    return;
                }

                const { count } = getDailyCallCount();

                // âœ¨ Daily usage limit logic
                if (count >= MAX_DAILY_CALLS) {
                    setError(`ì¼ì¼ ìµœëŒ€ ì‚¬ìš© íšŸìˆ˜(${MAX_DAILY_CALLS}íšŒ)ë¥¼ ì´ˆê³¼í–ˆìŠµë‹ˆë‹¤. ë‚´ì¼ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.`);
                    return; // Prevent API call
                }

                setIsLoading(true);
                setError('');

                // The prompt is now structured to ask for two distinct JSON objects within one response.
                const promptText = `
                    You are a professional video prompt generator for Google Veo 3. 
                    Your task is to translate the following Korean video idea into a structured English prompt, and also provide a Korean explanation for each field.

                    Korean Input: "${koreanInput}"

                    Respond ONLY in the following JSON format. Do not include any other text besides the valid JSON.
                    {
                      "english_prompt": {
                        "basic_info": {
                          "main_prompt": "Main English prompt for Veo 3",
                          "duration": "8 seconds"
                        },
                        "scene": {
                          "description": "Detailed scene description (English)",
                          "mood": "Mood/Tone (English)"
                        },
                        "technical": {
                          "camera_work": "Camera work description (English)",
                          "visual_style": "Visual style (English)"
                        }
                      },
                      "korean_explanation": {
                        "basic_info": {
                          "main_prompt_kr": "ë©”ì¸ í”„ë¡¬í”„íŠ¸ í•œêµ­ì–´ ì„¤ëª…",
                          "duration_kr": "ì˜ìƒ ê¸¸ì´ í•œêµ­ì–´ ì„¤ëª…"
                        },
                        "scene": {
                          "description_kr": "ì¥ë©´ ìƒì„¸ ì„¤ëª… (í•œêµ­ì–´)",
                          "mood_kr": "ë¶„ìœ„ê¸° (í•œêµ­ì–´)"
                        },
                        "technical": {
                          "camera_work_kr": "ì¹´ë©”ë¼ ì›Œí¬ ì„¤ëª… (í•œêµ­ì–´)",
                          "visual_style_kr": "ë¹„ì£¼ì–¼ ìŠ¤íƒ€ì¼ (í•œêµ­ì–´)"
                        }
                      }
                    }
                `;

                try {
                    const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-pro-latest:generateContent?key=${GEMINI_API_KEY}`, {
                        method: "POST",
                        headers: { "Content-Type": "application/json" },
                        body: JSON.stringify({
                            contents: [{ role: "user", parts: [{ text: promptText }] }]
                        })
                    });

                    if (!response.ok) {
                        const errorData = await response.json();
                        console.error("Gemini API Error:", errorData);
                        throw new Error(`API ìš”ì²­ ì‹¤íŒ¨: ${response.status} - ${errorData.error.message}`);
                    }

                    const data = await response.json();
                    const responseText = data.candidates[0].content.parts[0].text.trim();
                    const parsedPrompt = JSON.parse(responseText.replace(/```json\n?|```\n?/g, ""));
                    setGeneratedPrompt(parsedPrompt);
                    
                    // On success, increment the counter and update the state
                    incrementDailyCallCount(count);
                    setCallCount(count + 1);

                } catch (error) {
                    console.error("Error generating prompt:", error);
                    setError('í”„ë¡¬í”„íŠ¸ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
                } finally {
                    setIsLoading(false);
                }
            };
            
            const copyToClipboard = () => {
                if (generatedPrompt && generatedPrompt.english_prompt) {
                    const copyablePrompt = generatedPrompt.english_prompt;
                    const jsonString = JSON.stringify(copyablePrompt, null, 2);

                    try {
                        // Attempt to use the modern Clipboard API
                        if (navigator.clipboard && navigator.clipboard.writeText) {
                            navigator.clipboard.writeText(jsonString);
                            setCopied(true);
                            setTimeout(() => setCopied(false), 2000);
                        } else {
                            throw new Error('Clipboard API is not supported.');
                        }
                    } catch (err) {
                        console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
                        // Fallback to the legacy method
                        const textArea = document.createElement('textarea');
                        textArea.value = jsonString;
                        textArea.style.position = 'fixed';
                        textArea.style.top = '0';
                        textArea.style.left = '0';
                        textArea.style.opacity = '0';
                        document.body.appendChild(textArea);
                        textArea.focus();
                        textArea.select();
                        try {
                            const successful = document.execCommand('copy');
                            if (successful) {
                                setCopied(true);
                                setTimeout(() => setCopied(false), 2000);
                            } else {
                                setError('ë³µì‚¬ ì‹¤íŒ¨: ë¸Œë¼ìš°ì €ì—ì„œ í´ë¦½ë³´ë“œ ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                            }
                        } catch (err) {
                            setError('ë³µì‚¬ ì‹¤íŒ¨: ë¸Œë¼ìš°ì €ì—ì„œ í´ë¦½ë³´ë“œ ì ‘ê·¼ì´ í—ˆìš©ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                        } finally {
                            document.body.removeChild(textArea);
                        }
                    }
                }
            };

            const useExample = (example) => { setKoreanInput(example); };

            const examples = ["ë°”ë‹¤ì—ì„œ ì„œí•‘í•˜ëŠ” ì‚¬ëŒì„ ì„ì–‘ ë°°ê²½ìœ¼ë¡œ ë“œë¼ë§ˆí‹±í•˜ê²Œ ì°ê³  ì‹¶ì–´", "ê³ ì–‘ì´ê°€ ì°½ê°€ì—ì„œ ë¹„ ì˜¤ëŠ” ë‚  ë©í•˜ë‹ˆ ë°”ê¹¥ì„ ë³´ëŠ” ê°ì„±ì ì¸ ì˜ìƒ", "ë„ì‹œì˜ ë°¤ê±°ë¦¬ë¥¼ ê±¸ìœ¼ë©° ë„¤ì˜¨ì‚¬ì¸ì´ ë°˜ì‚¬ë˜ëŠ” ì‹œë„¤ë§ˆí‹±í•œ ì¥ë©´", "ì•„ì¹¨ í–‡ì‚´ì´ ë“¤ì–´ì˜¤ëŠ” ì¹´í˜ì—ì„œ ì»¤í”¼ë¥¼ ë§ˆì‹œëŠ” í‰ì˜¨í•œ ìˆœê°„"];

            return (
                <div className="min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 text-white font-sans">
                    <div className="container mx-auto px-4 py-8 max-w-4xl">
                        {/* Header */}
                        <div className="text-center mb-12">
                            <div className="flex justify-center items-center gap-3 mb-4">
                                <Camera /><h1 className="text-4xl font-bold bg-gradient-to-r from-purple-400 to-pink-400 bg-clip-text text-transparent">Veo 3 í”„ë¡¬í”„íŠ¸ ìƒì„±ê¸°</h1>
                            </div>
                            <p className="text-gray-300 text-lg mb-2">í•œêµ­ì–´ë¡œ ë™ì˜ìƒ ì•„ì´ë””ì–´ë¥¼ ì…ë ¥í•˜ë©´ Google Veo 3ìš© í”„ë¡¬í”„íŠ¸ë¡œ ë³€í™˜í•´ë“œë¦½ë‹ˆë‹¤</p>
                            <p className="text-400 text-sm">ğŸ¬ ë¬´ë£Œ â€¢ ë¹ ë¥¸ ë³€í™˜ â€¢ êµ¬ì¡°í™”ëœ ê²°ê³¼ â€¢ í•œì˜ ë²ˆì—­ ì§€ì›</p>
                        </div>

                        {/* Input Section */}
                        <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6 mb-8">
                            <label className="block text-lg font-semibold mb-4">ë™ì˜ìƒ ì•„ì´ë””ì–´ë¥¼ í•œêµ­ì–´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”</label>
                            <textarea
                                value={koreanInput}
                                onChange={(e) => setKoreanInput(e.target.value)}
                                placeholder="ì˜ˆ: ë°”ë‹¤ì—ì„œ ì„œí•‘í•˜ëŠ” ì‚¬ëŒì„ ì„ì–‘ ë°°ê²½ìœ¼ë¡œ ë“œë¼ë§ˆí‹±í•˜ê²Œ ì°ê³  ì‹¶ì–´"
                                className="w-full h-32 p-4 bg-white/5 border border-white/20 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:border-purple-400 focus:ring-2 focus:ring-purple-400/20 resize-none"
                                maxLength="500"
                            />
                            
                            {/* Character count */}
                            <div className="text-right mt-2">
                                <span className="text-gray-400 text-sm">{koreanInput.length}/500</span>
                            </div>

                            {/* API Call Count */}
                            <div className="text-left mt-2 text-sm text-gray-400">
                                ğŸ’¡ ì˜¤ëŠ˜ ì‚¬ìš© íšŸìˆ˜: {callCount} / {MAX_DAILY_CALLS}
                            </div>
                            
                            {/* Examples */}
                            <div className="mt-4">
                                <p className="text-sm text-gray-400 mb-3">ğŸ’¡ ì˜ˆì‹œ (í´ë¦­í•˜ë©´ ì…ë ¥ë©ë‹ˆë‹¤):</p>
                                <div className="grid grid-cols-1 md:grid-cols-2 gap-2">
                                    {examples.map((example, index) => (
                                        <button key={index} onClick={() => useExample(example)} className="text-left p-3 bg-white/5 border border-white/10 rounded-lg hover:bg-white/10 hover:border-purple-400/50 transition-all duration-200 text-sm">
                                            "{example}"
                                        </button>
                                    ))}
                                </div>
                            </div>

                            {/* Error Message */}
                            {error && (
                                <div className="mt-4 p-3 bg-red-500/20 border border-red-500/50 rounded-lg">
                                    <p className="text-red-300 text-sm">{error}</p>
                                </div>
                            )}

                            <button
                                onClick={generatePrompt}
                                disabled={isLoading || callCount >= MAX_DAILY_CALLS}
                                className="mt-6 w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 disabled:from-gray-600 disabled:to-gray-600 px-6 py-3 rounded-lg font-semibold flex items-center justify-center gap-2 transition-all duration-200 disabled:cursor-not-allowed"
                            >
                                {isLoading ? (
                                    <div className="animate-spin w-5 h-5 border-2 border-white/30 border-t-white rounded-full" />
                                ) : (
                                    <Wand2 />
                                )}
                                {isLoading ? 'í”„ë¡¬í”„íŠ¸ ìƒì„± ì¤‘...' : 'í”„ë¡¬í”„íŠ¸ ìƒì„±í•˜ê¸°'}
                            </button>
                        </div>

                        {/* Output Section */}
                        {generatedPrompt && (
                            <div className="bg-white/10 backdrop-blur-sm rounded-2xl p-6">
                                <div className="flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-4">
                                    <h2 className="text-xl font-bold">âœ¨ ìƒì„±ëœ Veo 3 í”„ë¡¬í”„íŠ¸</h2>
                                </div>
                                <div className="space-y-6">
                                    <div className="border-l-4 border-purple-400 pl-4">
                                        <h3 className="text-lg font-bold text-purple-400 mb-3">ğŸ¯ ê¸°ë³¸ ì •ë³´</h3>
                                        <div className="space-y-3">
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <h4 className="font-semibold text-purple-300 mb-2">ë©”ì¸ í”„ë¡¬í”„íŠ¸</h4>
                                                <p className="text-gray-100 mb-2">{generatedPrompt.english_prompt.basic_info.main_prompt}</p>
                                                <p className="text-gray-400 text-sm italic border-t border-gray-600 pt-2">í•œêµ­ì–´: {generatedPrompt.korean_explanation.basic_info.main_prompt_kr}</p>
                                            </div>
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <h4 className="font-semibold text-purple-300 mb-2">ì˜ìƒ ê¸¸ì´</h4>
                                                <p className="text-gray-100">{generatedPrompt.english_prompt.basic_info.duration}</p>
                                                <p className="text-gray-400 text-sm italic border-t border-gray-600 pt-2">í•œêµ­ì–´: {generatedPrompt.korean_explanation.basic_info.duration_kr}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="border-l-4 border-blue-400 pl-4">
                                        <h3 className="text-lg font-bold text-blue-400 mb-3">ğŸ¬ ì¥ë©´ êµ¬ì„±</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <h4 className="font-semibold text-blue-300 mb-2">ì¥ë©´ ì„¤ëª…</h4>
                                                <p className="text-gray-100 text-sm mb-2">{generatedPrompt.english_prompt.scene.description}</p>
                                                <p className="text-gray-400 text-xs italic border-t border-gray-600 pt-2">í•œêµ­ì–´: {generatedPrompt.korean_explanation.scene.description_kr}</p>
                                            </div>
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <h4 className="font-semibold text-blue-300 mb-2">ë¶„ìœ„ê¸°</h4>
                                                <p className="text-gray-100 text-sm mb-2">{generatedPrompt.english_prompt.scene.mood}</p>
                                                <p className="text-gray-400 text-xs italic border-t border-gray-600 pt-2">í•œêµ­ì–´: {generatedPrompt.korean_explanation.scene.mood_kr}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div className="border-l-4 border-green-400 pl-4">
                                        <h3 className="text-lg font-bold text-green-400 mb-3">ğŸ“¹ ê¸°ìˆ ì  ìš”ì†Œ</h3>
                                        <div className="grid grid-cols-1 md:grid-cols-2 gap-3">
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <h4 className="font-semibold text-green-300 mb-2">ì¹´ë©”ë¼ ì›Œí¬</h4>
                                                <p className="text-gray-100 text-sm mb-2">{generatedPrompt.english_prompt.technical.camera_work}</p>
                                                <p className="text-gray-400 text-xs italic border-t border-gray-600 pt-2">í•œêµ­ì–´: {generatedPrompt.korean_explanation.technical.camera_work_kr}</p>
                                            </div>
                                            <div className="p-4 bg-black/20 rounded-lg">
                                                <h4 className="font-semibold text-green-300 mb-2">ë¹„ì£¼ì–¼ ìŠ¤íƒ€ì¼</h4>
                                                <p className="text-gray-100 text-sm mb-2">{generatedPrompt.english_prompt.technical.visual_style}</p>
                                                <p className="text-gray-400 text-xs italic border-t border-gray-600 pt-2">í•œêµ­ì–´: {generatedPrompt.korean_explanation.technical.visual_style_kr}</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div className="mt-6">
                                    <div className="flex items-center justify-between gap-4">
                                        <h3 className="font-semibold text-gray-300">ğŸ“‹ JSON í˜•íƒœ (Veo 3ì—ì„œ ì‚¬ìš© ê°€ëŠ¥)</h3>
                                    </div>
                                    <pre className="bg-black/40 p-4 rounded-lg text-xs sm:text-sm overflow-x-auto text-green-300 max-h-60 overflow-y-auto mt-2">
                                        {JSON.stringify(generatedPrompt.english_prompt, null, 2)}
                                    </pre>
                                </div>
                            </div>
                        )}

                        {/* Footer */}
                        <div className="text-center mt-12 space-y-4">
                            <p className="text-gray-400">ğŸ¬ Google Veo 3ì™€ í•¨ê»˜ ë©‹ì§„ ë™ì˜ìƒì„ ë§Œë“¤ì–´ë³´ì„¸ìš”!</p>
                            <div className="text-sm text-gray-500 space-y-1">
                                <p>ğŸ’¡ íŒ: ìƒì„±ëœ ì˜ë¬¸ í”„ë¡¬í”„íŠ¸ë¥¼ Veo 3ì— ë³µì‚¬í•˜ì—¬ ì‚¬ìš©í•˜ì„¸ìš”</p>
                                <p>ğŸ”„ ë” ë‚˜ì€ ê²°ê³¼ë¥¼ ìœ„í•´ êµ¬ì²´ì ì´ê³  ìƒì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•´ë³´ì„¸ìš”</p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Veo3PromptGenerator />);
    </script>
</body>
</html>
